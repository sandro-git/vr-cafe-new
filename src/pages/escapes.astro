---
import GameList from "../components/GameList.astro";
import BaseLayout from "../layouts/BaseLayout.astro";
import GamesLayout from "../layouts/GamesLayout.astro";

import { sanityClient } from "sanity:client";

const escapes =
  await sanityClient.fetch(`*[_type == "games" && tag->title == "escapeGame"]{
  name,
  description,
  image{
    alt,
    asset->{url}
  },
  tag->{name},
  slug
}`);
// This fetches all games with the tag "escapeGame" from Sanity
---

<BaseLayout>
  <GamesLayout>
    <GameList experiences={escapes} />
  </GamesLayout>
</BaseLayout>
